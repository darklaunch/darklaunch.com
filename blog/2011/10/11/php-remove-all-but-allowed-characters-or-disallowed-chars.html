<p>The following will remove all characters but those allowed.</p>

<code name="php">
$str = preg_replace('@[^a-zA-Z0-9_:;\(\)\?\|\&=!<>+*/\%-]@', '', $str);
</code>